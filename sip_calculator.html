<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoneyWiseGuide â€“ SIP Calculator (â‚¹ INR)</title>
    <link rel="icon" type="image/png" href="https://page.gensparksite.com/v1/base64_upload/415cfa8f4313163509e7eeacb4384ed8">
    
    <!-- CDN Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            --navy: #0B1F3B;
            --orange: #FF7A21;
            --white: #FFFFFF;
            --light-gray: #F7FAFC;
            --green: #10B981;
            --blue: #3B82F6;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            color: var(--navy);
            line-height: 1.6;
            background-color: var(--light-gray);
        }
        
        .brand-font {
            font-family: 'Poppins', sans-serif;
        }
        
        .bg-navy { background-color: var(--navy); }
        .bg-orange { background-color: var(--orange); }
        .bg-green { background-color: var(--green); }
        .bg-blue { background-color: var(--blue); }
        .text-navy { color: var(--navy); }
        .text-orange { color: var(--orange); }
        .text-green { color: var(--green); }
        .text-blue { color: var(--blue); }
        .border-orange { border-color: var(--orange); }
        .border-green { border-color: var(--green); }
        .border-blue { border-color: var(--blue); }
        
        .hero-gradient {
            background: linear-gradient(135deg, var(--navy) 0%, #1a365d 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            border-color: var(--orange);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .btn-primary {
            background-color: var(--orange);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary:hover {
            background-color: #e5651d;
            transform: translateY(-2px);
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            background-color: var(--orange);
            color: white;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 250px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1000;
            border-radius: 8px;
            top: 100%;
            left: 0;
            margin-top: 8px;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        .dropdown-content a {
            color: var(--navy);
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s;
        }
        
        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
        
        .input-field {
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px 16px;
            width: 100%;
            font-size: 16px;
        }
        
        .input-field:focus {
            border-color: var(--orange);
            box-shadow: 0 0 0 3px rgba(255, 122, 33, 0.1);
            outline: none;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--navy);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .result-highlight {
            background: linear-gradient(135deg, var(--orange), #ff8c42);
            color: white;
            border-radius: 8px;
            padding: 20px;
            margin: 12px 0;
            text-align: center;
        }
        
        .result-highlight-green {
            background: linear-gradient(135deg, var(--green), #10b982);
            color: white;
            border-radius: 8px;
            padding: 20px;
            margin: 12px 0;
            text-align: center;
        }
        
        .result-highlight-blue {
            background: linear-gradient(135deg, var(--blue), #3b83f6);
            color: white;
            border-radius: 8px;
            padding: 20px;
            margin: 12px 0;
            text-align: center;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        
        .error-message {
            color: #e53e3e;
            font-size: 14px;
            margin-top: 4px;
        }
        
        .loading {
            display: none;
            color: var(--orange);
        }
        
        @media (max-width: 768px) {
            .desktop-nav {
                display: none;
            }
            
            .mobile-menu {
                display: block;
            }
        }
        
        .mobile-menu {
            display: none;
        }
        
        .mobile-menu-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-navy text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo & Brand -->
                <div class="flex items-center space-x-3">
                    <img src="https://page.gensparksite.com/v1/base64_upload/415cfa8f4313163509e7eeacb4384ed8" alt="MoneyWiseGuide Logo" class="h-10 w-10">
                    <div class="brand-font text-2xl font-bold text-white">MoneyWiseGuide</div>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="desktop-nav hidden md:flex items-center space-x-6">
                    <a href="/" class="nav-link"><i class="fas fa-home mr-2"></i>Home</a>
                    
                    <!-- Calculators Dropdown -->
                    <div class="dropdown">
                        <a href="/calculators" class="nav-link"><i class="fas fa-calculator mr-2"></i>Calculators <i class="fas fa-chevron-down ml-1"></i></a>
                        <div class="dropdown-content">
                            <a href="/calculators/sip"><i class="fas fa-chart-line text-orange mr-2"></i>SIP Calculator</a>
                            <a href="/calculators/lumpsum"><i class="fas fa-coins text-orange mr-2"></i>Lumpsum Calculator</a>
                            <a href="/calculators/fixed-deposit"><i class="fas fa-university text-orange mr-2"></i>Fixed Deposit Calculator</a>
                            <a href="/calculators/recurring-deposit"><i class="fas fa-calendar-alt text-orange mr-2"></i>Recurring Deposit Calculator</a>
                            <a href="/calculators/mortgage"><i class="fas fa-home text-orange mr-2"></i>Mortgage Calculator</a>
                        </div>
                    </div>
                    
                    <!-- Tools Dropdown -->
                    <div class="dropdown">
                        <a href="/tools" class="nav-link"><i class="fas fa-tools mr-2"></i>Tools <i class="fas fa-chevron-down ml-1"></i></a>
                        <div class="dropdown-content">
                            <a href="/tools/budget-tracker"><i class="fas fa-chart-pie text-orange mr-2"></i>Budget Tracker</a>
                            <a href="/tools/expense-manager"><i class="fas fa-shopping-cart text-orange mr-2"></i>Expense Manager</a>
                            <a href="/tools/portfolio-tracker"><i class="fas fa-briefcase text-orange mr-2"></i>Portfolio Tracker</a>
                        </div>
                    </div>
                    
                    <a href="/blogs" class="nav-link"><i class="fas fa-blog mr-2"></i>Blogs</a>
                </nav>
                
                <!-- Auth Buttons -->
                <div class="hidden md:flex items-center space-x-3">
                    <a href="/login" class="btn-secondary text-sm">
                        <i class="fas fa-sign-in-alt mr-2"></i>Login
                    </a>
                    <a href="/register" class="btn-primary text-sm">
                        <i class="fas fa-user-plus mr-2"></i>Register
                    </a>
                </div>
                
                <!-- Mobile Menu Button -->
                <div class="mobile-menu md:hidden">
                    <button class="mobile-menu-button" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Breadcrumb -->
    <div class="bg-white py-3 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <nav class="text-sm">
                <a href="/" class="text-orange hover:underline">Home</a> 
                <span class="mx-2 text-gray-500">/</span>
                <a href="/calculators" class="text-orange hover:underline">Calculators</a> 
                <span class="mx-2 text-gray-500">/</span>
                <span class="text-gray-700">SIP Calculator</span>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <!-- Page Header -->
        <div class="text-center mb-12">
            <h1 class="brand-font text-5xl font-bold text-navy mb-6">SIP Calculator</h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">Plan your Systematic Investment Plan and achieve your financial goals with the power of compound interest. Results update automatically as you change values.</p>
        </div>

        <div class="grid lg:grid-cols-2 gap-12">
            <!-- Calculator Form -->
            <div class="card-hover p-8">
                <h2 class="brand-font text-3xl font-semibold text-navy mb-8 flex items-center">
                    <i class="fas fa-chart-line text-orange mr-4 text-2xl"></i>
                    SIP Parameters
                </h2>
                
                <form id="sipForm" class="space-y-8">
                    <!-- Monthly Investment -->
                    <div>
                        <label for="monthlyInvestment" class="block text-lg font-semibold text-navy mb-3">
                            Monthly Investment (â‚¹)
                            <span class="tooltip ml-2">
                                <i class="fas fa-info-circle text-orange cursor-help"></i>
                                <span class="tooltiptext">Amount you want to invest every month through SIP</span>
                            </span>
                        </label>
                        <input type="number" id="monthlyInvestment" name="monthlyInvestment" 
                               class="input-field text-lg" 
                               placeholder="Enter monthly investment" value="5000" min="500" step="500">
                        <div id="monthlyInvestmentError" class="error-message"></div>
                    </div>

                    <!-- Expected Annual Return -->
                    <div>
                        <label for="annualReturn" class="block text-lg font-semibold text-navy mb-3">
                            Expected Annual Return (%)
                            <span class="tooltip ml-2">
                                <i class="fas fa-info-circle text-orange cursor-help"></i>
                                <span class="tooltiptext">Expected annual return from your mutual fund investment</span>
                            </span>
                        </label>
                        <input type="number" id="annualReturn" name="annualReturn" 
                               class="input-field text-lg" 
                               placeholder="Enter expected return" value="12" min="1" max="30" step="0.1">
                        <div id="annualReturnError" class="error-message"></div>
                    </div>

                    <!-- Investment Period -->
                    <div>
                        <label for="investmentPeriod" class="block text-lg font-semibold text-navy mb-3">
                            Investment Period (Years)
                            <span class="tooltip ml-2">
                                <i class="fas fa-info-circle text-orange cursor-help"></i>
                                <span class="tooltiptext">Duration for which you want to continue the SIP</span>
                            </span>
                        </label>
                        <input type="number" id="investmentPeriod" name="investmentPeriod" 
                               class="input-field text-lg" 
                               placeholder="Enter investment period" value="10" min="1" max="40" step="1">
                        <div id="investmentPeriodError" class="error-message"></div>
                    </div>

                    <!-- Step-up Percentage -->
                    <div>
                        <label for="stepUpPercentage" class="block text-lg font-semibold text-navy mb-3">
                            Annual Step-up (%)
                            <span class="tooltip ml-2">
                                <i class="fas fa-info-circle text-orange cursor-help"></i>
                                <span class="tooltiptext">Percentage increase in SIP amount every year</span>
                            </span>
                        </label>
                        <input type="number" id="stepUpPercentage" name="stepUpPercentage" 
                               class="input-field text-lg" 
                               placeholder="Enter step-up percentage" value="0" min="0" max="20" step="0.1">
                        <div id="stepUpPercentageError" class="error-message"></div>
                    </div>

                    <!-- Auto-calculation Notice -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                        <i class="fas fa-magic text-blue mr-2"></i>
                        <span class="text-blue font-semibold">Results update automatically as you change values</span>
                        <span class="loading ml-3">
                            <i class="fas fa-spinner fa-spin text-blue"></i>
                        </span>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div class="card-hover p-8">
                <h2 class="brand-font text-3xl font-semibold text-navy mb-8 flex items-center">
                    <i class="fas fa-chart-pie text-orange mr-4 text-2xl"></i>
                    Investment Projection
                </h2>
                
                <div id="results" class="hidden">
                    <!-- Key Results -->
                    <div class="space-y-6 mb-8">
                        <div class="result-highlight">
                            <h3 class="text-2xl font-bold mb-3">Maturity Amount</h3>
                            <p class="text-4xl font-bold" id="maturityAmount">â‚¹0</p>
                        </div>
                        
                        <div class="bg-gray-50 p-6 rounded-lg space-y-4">
                            <div class="flex justify-between items-center">
                                <span class="font-semibold text-lg">Total Investment:</span>
                                <span class="font-bold text-xl text-navy" id="totalInvestment">â‚¹0</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="font-semibold text-lg">Total Returns:</span>
                                <span class="font-bold text-xl text-green-600" id="totalReturns">â‚¹0</span>
                            </div>
                            <div class="flex justify-between items-center border-t pt-4">
                                <span class="font-semibold text-lg">Return Rate (CAGR):</span>
                                <span class="font-bold text-xl text-orange" id="returnRate">0%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chart -->
                    <div class="chart-container mb-8">
                        <canvas id="sipChart"></canvas>
                    </div>

                    <!-- Additional Insights -->
                    <div class="bg-blue-50 p-6 rounded-lg mb-8">
                        <h4 class="font-bold text-navy mb-4 text-lg">
                            <i class="fas fa-lightbulb text-orange mr-2"></i>
                            Key Insights
                        </h4>
                        <ul class="space-y-2" id="insights">
                            <!-- Dynamic insights will be added here -->
                        </ul>
                    </div>
                </div>

                <div id="noResults" class="text-center py-16 text-gray-500">
                    <i class="fas fa-chart-line text-8xl mb-6 opacity-50"></i>
                    <p class="text-xl">Enter your SIP details to see your investment projection</p>
                </div>
            </div>
        </div>

        <!-- Educational Content -->
        <div class="mt-16 grid md:grid-cols-3 gap-8">
            <div class="card-hover p-8">
                <h3 class="brand-font text-2xl font-bold text-navy mb-6">
                    <i class="fas fa-calendar-check text-green mr-3"></i>
                    Regular Investment
                </h3>
                <ul class="space-y-3">
                    <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i><span>Disciplined monthly investing</span></li>
                    <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i><span>Rupee cost averaging benefits</span></li>
                    <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i><span>Reduces market timing risk</span></li>
                    <li class="flex items-start"><i class="fas fa-check-circle text-green-500 mr-3 mt-1"></i><span>Builds long-term wealth</span></li>
                </ul>
            </div>
            
            <div class="card-hover p-8">
                <h3 class="brand-font text-2xl font-bold text-navy mb-6">
                    <i class="fas fa-chart-line text-orange mr-3"></i>
                    Compound Interest
                </h3>
                <ul class="space-y-3">
                    <li class="flex items-start"><i class="fas fa-star text-orange mr-3 mt-1"></i><span>Power of compounding over time</span></li>
                    <li class="flex items-start"><i class="fas fa-star text-orange mr-3 mt-1"></i><span>Exponential wealth growth</span></li>
                    <li class="flex items-start"><i class="fas fa-star text-orange mr-3 mt-1"></i><span>Time is your biggest asset</span></li>
                    <li class="flex items-start"><i class="fas fa-star text-orange mr-3 mt-1"></i><span>Early start gives massive advantage</span></li>
                </ul>
            </div>

            <div class="card-hover p-8">
                <h3 class="brand-font text-2xl font-bold text-navy mb-6">
                    <i class="fas fa-arrow-up text-blue mr-3"></i>
                    Step-up SIP
                </h3>
                <ul class="space-y-3">
                    <li class="flex items-start"><i class="fas fa-lightbulb text-blue-500 mr-3 mt-1"></i><span>Increase SIP amount annually</span></li>
                    <li class="flex items-start"><i class="fas fa-lightbulb text-blue-500 mr-3 mt-1"></i><span>Beat inflation effectively</span></li>
                    <li class="flex items-start"><i class="fas fa-lightbulb text-blue-500 mr-3 mt-1"></i><span>Align with income growth</span></li>
                    <li class="flex items-start"><i class="fas fa-lightbulb text-blue-500 mr-3 mt-1"></i><span>Accelerate wealth creation</span></li>
                </ul>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-navy text-white py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-6">
                        <img src="https://page.gensparksite.com/v1/base64_upload/415cfa8f4313163509e7eeacb4384ed8" alt="MoneyWiseGuide Logo" class="h-8 w-8">
                        <h3 class="brand-font text-xl font-bold">MoneyWiseGuide</h3>
                    </div>
                    <p class="text-gray-300">Making financial decisions simpler with smart calculators and tools.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4 text-lg">Calculators</h4>
                    <ul class="space-y-3">
                        <li><a href="/calculators/sip" class="hover:text-orange">SIP Calculator</a></li>
                        <li><a href="/calculators/lumpsum" class="hover:text-orange">Lumpsum Calculator</a></li>
                        <li><a href="/calculators/fixed-deposit" class="hover:text-orange">Fixed Deposit Calculator</a></li>
                        <li><a href="/calculators/recurring-deposit" class="hover:text-orange">Recurring Deposit Calculator</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4 text-lg">Tools</h4>
                    <ul class="space-y-3">
                        <li><a href="/tools/budget-tracker" class="hover:text-orange">Budget Tracker</a></li>
                        <li><a href="/tools/goal-planner" class="hover:text-orange">Goal Planner</a></li>
                        <li><a href="/tools/portfolio-tracker" class="hover:text-orange">Portfolio Tracker</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4 text-lg">Contact</h4>
                    <p class="text-gray-300">Build better financial habits with our comprehensive suite of tools.</p>
                </div>
            </div>
            <div class="border-t border-gray-600 mt-8 pt-6 text-center">
                <p class="text-gray-300">&copy; 2024 MoneyWiseGuide. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        let sipChart = null;
        let currentResults = null;
        let autoUpdateTimeout;
        
        // Currency formatter for Indian Rupees
        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                maximumFractionDigits: 0
            }).format(amount);
        };

        // Auto-update functionality with debouncing
        function debounceAutoUpdate() {
            clearTimeout(autoUpdateTimeout);
            document.querySelector('.loading').style.display = 'inline-block';
            
            autoUpdateTimeout = setTimeout(() => {
                if (validateInputsQuietly()) {
                    calculateSIP();
                } else {
                    document.querySelector('.loading').style.display = 'none';
                }
            }, 500); // 500ms delay
        }
        
        // Quiet validation without showing errors
        function validateInputsQuietly() {
            const monthlyInvestment = parseFloat(document.getElementById('monthlyInvestment').value);
            const annualReturn = parseFloat(document.getElementById('annualReturn').value);
            const investmentPeriod = parseFloat(document.getElementById('investmentPeriod').value);
            const stepUpPercentage = parseFloat(document.getElementById('stepUpPercentage').value) || 0;
            
            // Basic validation - must have valid numbers
            if (isNaN(monthlyInvestment) || monthlyInvestment < 500) return false;
            if (isNaN(annualReturn) || annualReturn <= 0 || annualReturn > 30) return false;
            if (isNaN(investmentPeriod) || investmentPeriod < 1 || investmentPeriod > 40) return false;
            if (stepUpPercentage < 0 || stepUpPercentage > 20) return false;
            
            return true;
        }
        
        // Validate form inputs
        function validateInputs() {
            let isValid = true;
            const monthlyInvestment = parseFloat(document.getElementById('monthlyInvestment').value);
            const annualReturn = parseFloat(document.getElementById('annualReturn').value);
            const investmentPeriod = parseFloat(document.getElementById('investmentPeriod').value);
            const stepUpPercentage = parseFloat(document.getElementById('stepUpPercentage').value) || 0;
            
            // Clear previous errors
            document.querySelectorAll('.error-message').forEach(div => div.textContent = '');
            document.querySelectorAll('.input-field').forEach(input => input.classList.remove('border-red-500'));
            
            // Validate monthly investment
            if (isNaN(monthlyInvestment) || monthlyInvestment < 500) {
                document.getElementById('monthlyInvestmentError').textContent = 'Minimum monthly investment is â‚¹500';
                document.getElementById('monthlyInvestment').classList.add('border-red-500');
                isValid = false;
            }
            
            // Validate annual return
            if (isNaN(annualReturn) || annualReturn <= 0 || annualReturn > 30) {
                document.getElementById('annualReturnError').textContent = 'Please enter a valid return rate between 0.1% and 30%';
                document.getElementById('annualReturn').classList.add('border-red-500');
                isValid = false;
            }
            
            // Validate investment period
            if (isNaN(investmentPeriod) || investmentPeriod < 1 || investmentPeriod > 40) {
                document.getElementById('investmentPeriodError').textContent = 'Investment period should be between 1 and 40 years';
                document.getElementById('investmentPeriod').classList.add('border-red-500');
                isValid = false;
            }
            
            // Validate step-up percentage
            if (stepUpPercentage < 0 || stepUpPercentage > 20) {
                document.getElementById('stepUpPercentageError').textContent = 'Step-up percentage should be between 0% and 20%';
                document.getElementById('stepUpPercentage').classList.add('border-red-500');
                isValid = false;
            }
            
            return isValid;
        }
        
        // Calculate SIP returns
        function calculateSIP() {
            if (!validateInputs()) return;
            
            // Show loading
            document.querySelector('.loading').style.display = 'inline-block';
            
            // Get form values
            const monthlyInvestment = parseFloat(document.getElementById('monthlyInvestment').value);
            const annualReturn = parseFloat(document.getElementById('annualReturn').value) / 100;
            const investmentPeriod = parseFloat(document.getElementById('investmentPeriod').value);
            const stepUpPercentage = parseFloat(document.getElementById('stepUpPercentage').value) / 100 || 0;
            
            // Calculate SIP with step-up
            const monthlyRate = annualReturn / 12;
            const totalMonths = investmentPeriod * 12;
            let totalInvestment = 0;
            let maturityAmount = 0;
            let currentMonthlyInvestment = monthlyInvestment;
            
            // Year by year calculation with step-up
            for (let year = 1; year <= investmentPeriod; year++) {
                for (let month = 1; month <= 12; month++) {
                    const monthsRemaining = totalMonths - ((year - 1) * 12 + month - 1);
                    const futureValue = currentMonthlyInvestment * Math.pow(1 + monthlyRate, monthsRemaining - 1);
                    maturityAmount += futureValue;
                    totalInvestment += currentMonthlyInvestment;
                }
                // Apply step-up for next year
                currentMonthlyInvestment *= (1 + stepUpPercentage);
            }
            
            const totalReturns = maturityAmount - totalInvestment;
            const cagr = Math.pow(maturityAmount / totalInvestment, 1 / investmentPeriod) - 1;
            
            // Store results globally
            currentResults = {
                maturityAmount,
                totalInvestment,
                totalReturns,
                cagr,
                inputs: {
                    monthlyInvestment,
                    annualReturn: annualReturn * 100,
                    investmentPeriod,
                    stepUpPercentage: stepUpPercentage * 100
                }
            };
            
            // Update results
            setTimeout(() => {
                document.querySelector('.loading').style.display = 'none';
                
                updateResults(maturityAmount, totalInvestment, totalReturns, cagr);
                createChart(totalInvestment, totalReturns);
                generateInsights(maturityAmount, totalInvestment, totalReturns, cagr, investmentPeriod, monthlyInvestment, stepUpPercentage);
                
                document.getElementById('results').classList.remove('hidden');
                document.getElementById('noResults').classList.add('hidden');
            }, 800);
        }
        
        // Update results display
        function updateResults(maturityAmount, totalInvestment, totalReturns, cagr) {
            document.getElementById('maturityAmount').textContent = formatCurrency(maturityAmount);
            document.getElementById('totalInvestment').textContent = formatCurrency(totalInvestment);
            document.getElementById('totalReturns').textContent = formatCurrency(totalReturns);
            document.getElementById('returnRate').textContent = (cagr * 100).toFixed(2) + '%';
        }
        
        // Create chart
        function createChart(totalInvestment, totalReturns) {
            const ctx = document.getElementById('sipChart').getContext('2d');
            
            if (sipChart) {
                sipChart.destroy();
            }
            
            sipChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Total Investment', 'Returns Earned'],
                    datasets: [{
                        data: [totalInvestment, totalReturns],
                        backgroundColor: ['#0B1F3B', '#FF7A21'],
                        borderWidth: 3,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'SIP Investment Breakdown',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 25,
                                font: {
                                    size: 16,
                                    weight: 'bold'
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = formatCurrency(context.parsed);
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Generate insights based on calculations
        function generateInsights(maturityAmount, totalInvestment, totalReturns, cagr, years, monthlyAmount, stepUpPercentage) {
            const insights = [];
            const returnPercentage = (totalReturns / totalInvestment) * 100;
            
            if (cagr > 0.15) {
                insights.push('ðŸŽ‰ Excellent expected returns! Your SIP strategy looks very promising');
            } else if (cagr > 0.10) {
                insights.push('ðŸ‘ Good expected returns for long-term wealth building');
            } else {
                insights.push('âš ï¸ Consider reviewing your return expectations or investment period');
            }
            
            if (years >= 15) {
                insights.push('â° Long-term SIP maximizes the power of compounding');
            } else if (years >= 10) {
                insights.push('ðŸ“ˆ Good investment horizon for SIP wealth creation');
            } else {
                insights.push('ðŸ’¡ Consider extending your SIP period for better compounding benefits');
            }
            
            if (monthlyAmount >= 10000) {
                insights.push('ðŸ’ª Excellent monthly discipline! You\'re on track for substantial wealth');
            } else if (monthlyAmount >= 5000) {
                insights.push('ðŸ‘Œ Good monthly investment amount - consistency is key');
            } else {
                insights.push('ðŸŽ¯ Consider increasing SIP amount as your income grows');
            }
            
            if (stepUpPercentage > 0) {
                insights.push(`ðŸ“Š Step-up SIP at ${(stepUpPercentage * 100).toFixed(1)}% annually will boost your returns significantly`);
                insights.push('ðŸš€ Step-up strategy helps beat inflation and build more wealth');
            } else {
                insights.push('ðŸ’¡ Consider step-up SIP to increase investments annually');
            }
            
            insights.push(`ðŸ’° Total wealth multiplication: ${(maturityAmount / totalInvestment).toFixed(1)}x your investment`);
            insights.push(`ðŸ“Š Monthly investment grows to ${formatCurrency(maturityAmount / (years * 12))} average monthly value`);
            
            const insightsList = document.getElementById('insights');
            insightsList.innerHTML = insights.map(insight => `<li class="text-base">${insight}</li>`).join('');
        }
        
        // Real-time input monitoring and auto-update
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input[type="number"]');
            
            // Add input listeners for auto-update
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    this.classList.remove('border-red-500');
                    const errorDiv = document.getElementById(this.id + 'Error');
                    if (errorDiv) errorDiv.textContent = '';
                    
                    // Trigger auto-update
                    debounceAutoUpdate();
                });
            });
            
            // Initial calculation with default values
            setTimeout(() => {
                if (validateInputsQuietly()) {
                    calculateSIP();
                }
            }, 100);
        });
        
        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu-content');
            if (menu) {
                menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
            }
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                if (validateInputsQuietly()) {
                    calculateSIP();
                }
            }
        });
    </script>
</body>
</html>