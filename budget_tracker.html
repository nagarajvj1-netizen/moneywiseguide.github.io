<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Tracker (₹) – MoneyWiseGuide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="https://page.gensparksite.com/v1/base64_upload/415cfa8f4313163509e7eeacb4384ed8">
    
    <style>
        :root {
            --mwg-color-bg: #FFFFFF;
            --mwg-color-surface: #F7FAFC;
            --mwg-color-text: #102A43;
            --mwg-color-brand: #0B1F3B;
            --mwg-color-accent: #FF7A21;
            --mwg-color-muted: #8795A1;
            --mwg-radius: 12px;
            --mwg-shadow: 0 6px 18px rgba(16,42,67,0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
            background: var(--mwg-color-bg);
            color: var(--mwg-color-text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }

        h1, h2, h3, h4 {
            font-family: 'Poppins', 'Inter', system-ui, sans-serif;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--mwg-color-brand);
        }

        h1 {
            font-weight: 700;
            font-size: 2.5rem;
            letter-spacing: -0.2px;
        }
        
        .hero-gradient h1 {
            color: white !important;
        }

        .mwg-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .mwg-card {
            background: var(--mwg-color-surface);
            border-radius: var(--mwg-radius);
            box-shadow: var(--mwg-shadow);
            padding: 2rem;
            margin: 1rem 0;
            border: 1px solid #E1E8F0;
        }

        .mwg-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: var(--mwg-color-brand);
            color: #fff;
            border: 0;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .mwg-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(11,31,59,.18);
        }

        .mwg-btn.outline {
            background: #fff;
            color: var(--mwg-color-brand);
            border: 2px solid var(--mwg-color-brand);
        }

        .mwg-btn.accent {
            background: var(--mwg-color-accent);
        }

        .mwg-input, .mwg-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 1px solid #D9E2EC;
            background: #fff;
            font-family: inherit;
            font-size: 0.95rem;
            color: inherit;
            transition: all 0.2s ease;
        }

        .mwg-input:focus, .mwg-select:focus {
            outline: 2px solid var(--mwg-color-accent);
            border-color: var(--mwg-color-accent);
        }

        .mwg-table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .mwg-table th, .mwg-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #EEF2F7;
            text-align: left;
        }

        .mwg-table th {
            background: #EFF6FF;
            color: #334E68;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .mwg-table .text-right {
            text-align: right;
        }

        .mwg-table .text-center {
            text-align: center;
        }

        .mwg-table tbody tr:nth-child(odd) {
            background: #FAFBFC;
        }

        .mwg-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem 1rem;
            border-radius: 999px;
            background: #fff;
            border: 1px solid #E1E8F0;
            box-shadow: 0 2px 10px rgba(16,42,67,.06);
            font-size: 0.9rem;
        }

        .mwg-badge img {
            width: 22px;
            height: 22px;
            border-radius: 50%;
        }

        .mwg-badge .name {
            font-family: 'Poppins', 'Inter', sans-serif;
            font-weight: 700;
            color: var(--mwg-color-brand);
            letter-spacing: 0.2px;
        }

        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            margin: 1rem 0;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .result-card {
            background: linear-gradient(135deg, var(--mwg-color-brand) 0%, #1a365d 100%);
            color: white;
            padding: 1.5rem;
            border-radius: var(--mwg-radius);
            text-align: center;
            box-shadow: var(--mwg-shadow);
        }

        .result-card .label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .result-card .value {
            font-size: 1.8rem;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--mwg-color-brand);
        }

        .help-text {
            font-size: 0.85rem;
            color: var(--mwg-color-muted);
            margin-top: 0.25rem;
        }

        .actions-row {
            display: flex;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .category-input {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border: 1px solid #E1E8F0;
            margin-bottom: 0.5rem;
        }

        .category-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: white;
        }

        .category-details {
            flex: 1;
        }

        .category-label {
            font-weight: 600;
            color: var(--mwg-color-brand);
            margin-bottom: 0.25rem;
        }

        .category-amount {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #D9E2EC;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #E5E7EB;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--mwg-color-accent);
            transition: width 0.3s ease;
        }

        .over-budget {
            background: #EF4444 !important;
        }

        .income-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .category-selector {
            margin-bottom: 1rem;
        }

        .category-selector select {
            width: 200px;
            margin-right: 1rem;
        }

        @media (max-width: 768px) {
            .mwg-container {
                padding: 1rem;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .hamburger {
                display: flex;
            }
            
            .income-categories {
                grid-template-columns: 1fr;
            }
        }

        .brand-font {
            font-family: 'Poppins', sans-serif;
        }
        
        .bg-navy { background-color: var(--mwg-color-brand); }
        .bg-orange { background-color: var(--mwg-color-accent); }
        .text-navy { color: var(--mwg-color-brand); }
        .text-orange { color: var(--mwg-color-accent); }
        
        .hero-gradient {
            background: linear-gradient(135deg, #0B1F3B 0%, #1a365d 100%) !important;
            color: white !important;
        }
        
        .hero-gradient h1,
        .hero-gradient .brand-font {
            color: white !important;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3) !important;
        }
        
        .hero-gradient p {
            color: white !important;
            opacity: 0.95 !important;
        }
        
        .hero-gradient .text-4xl,
        .hero-gradient .md\:text-5xl,
        .hero-gradient .font-bold,
        .hero-gradient .text-xl {
            color: white !important;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            background-color: var(--mwg-color-accent);
            color: white;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 280px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 8px;
            padding: 10px 0;
            top: 100%;
            left: 0;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        .dropdown-content a {
            color: var(--mwg-color-brand);
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: all 0.3s ease;
        }
        
        .dropdown-content a:hover {
            background-color: #f1f1f1;
        }
        
        .mobile-nav {
            position: fixed;
            top: 0;
            right: -100%;
            height: 100vh;
            width: 300px;
            background-color: var(--mwg-color-brand);
            transition: all 0.3s ease;
            z-index: 999;
            padding: 80px 20px 20px;
        }
        
        .mobile-nav.open {
            right: 0;
        }
        
        .mobile-nav a {
            display: block;
            color: white;
            padding: 15px 0;
            text-decoration: none;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .mobile-nav a:hover {
            color: var(--mwg-color-accent);
        }
        
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }
        
        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: white;
            margin: 3px 0;
            transition: 0.3s;
        }
        
        .footer {
            background-color: var(--mwg-color-brand);
            color: white;
            padding: 40px 0 20px;
            margin-top: 60px;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
        }
        
        .footer-section h3 {
            color: var(--mwg-color-accent);
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .footer-section a {
            color: #cbd5e0;
            text-decoration: none;
            display: block;
            padding: 5px 0;
            transition: color 0.3s ease;
        }
        
        .footer-section a:hover {
            color: var(--mwg-color-accent);
        }
        
        .footer-bottom {
            border-top: 1px solid #2d3748;
            padding-top: 20px;
            text-align: center;
            color: #a0aec0;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="bg-navy text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo & Brand -->
                <div class="flex items-center space-x-3">
                    <img src="https://page.gensparksite.com/v1/base64_upload/415cfa8f4313163509e7eeacb4384ed8" alt="MoneyWiseGuide Logo" class="h-10 w-10">
                    <div class="brand-font text-2xl font-bold text-white">MoneyWiseGuide</div>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="desktop-nav hidden md:flex items-center space-x-6">
                    <a href="/" class="nav-link"><i class="fas fa-home mr-2"></i>Home</a>
                    
                    <!-- Calculators Dropdown -->
                    <div class="dropdown">
                        <a href="/calculators" class="nav-link"><i class="fas fa-calculator mr-2"></i>Calculators <i class="fas fa-chevron-down ml-1"></i></a>
                        <div class="dropdown-content">
                            <a href="/calculators/sip"><i class="fas fa-chart-line text-orange mr-2"></i>SIP Calculator</a>
                            <a href="/calculators/lumpsum"><i class="fas fa-coins text-orange mr-2"></i>Lumpsum Calculator</a>
                            <a href="/calculators/fixed-deposit"><i class="fas fa-university text-orange mr-2"></i>Fixed Deposit Calculator</a>
                            <a href="/calculators/recurring-deposit"><i class="fas fa-calendar-alt text-orange mr-2"></i>Recurring Deposit Calculator</a>
                            <a href="/calculators/mortgage"><i class="fas fa-home text-orange mr-2"></i>Mortgage Calculator</a>
                            <a href="/calculators/debt-payoff"><i class="fas fa-credit-card text-orange mr-2"></i>Debt Payoff Calculator</a>
                        </div>
                    </div>
                    
                    <!-- Tools Dropdown -->
                    <div class="dropdown">
                        <a href="/tools" class="nav-link"><i class="fas fa-tools mr-2"></i>Tools <i class="fas fa-chevron-down ml-1"></i></a>
                        <div class="dropdown-content">
                            <a href="/tools/budget-tracker"><i class="fas fa-chart-pie text-orange mr-2"></i>Budget Tracker</a>
                            <a href="/tools/expense-manager"><i class="fas fa-shopping-cart text-orange mr-2"></i>Expense Manager</a>
                            <a href="/tools/emergency-fund"><i class="fas fa-shield-alt text-orange mr-2"></i>Emergency Fund Calculator</a>
                            <a href="/tools/retirement-planner"><i class="fas fa-umbrella-beach text-orange mr-2"></i>Retirement Planner</a>
                            <a href="/tools/goals-planner"><i class="fas fa-target text-orange mr-2"></i>Goals Planner</a>
                        </div>
                    </div>
                    
                    <a href="/blog" class="nav-link"><i class="fas fa-blog mr-2"></i>Blog</a>
                    <a href="/contact" class="nav-link"><i class="fas fa-envelope mr-2"></i>Contact</a>
                </nav>
                
                <!-- Mobile menu button -->
                <div class="hamburger md:hidden" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
        <a href="/"><i class="fas fa-home mr-2"></i>Home</a>
        <a href="/calculators/sip"><i class="fas fa-chart-line mr-2"></i>SIP Calculator</a>
        <a href="/calculators/lumpsum"><i class="fas fa-coins mr-2"></i>Lumpsum Calculator</a>
        <a href="/calculators/fixed-deposit"><i class="fas fa-university mr-2"></i>Fixed Deposit Calculator</a>
        <a href="/calculators/recurring-deposit"><i class="fas fa-calendar-alt mr-2"></i>Recurring Deposit Calculator</a>
        <a href="/calculators/mortgage"><i class="fas fa-home mr-2"></i>Mortgage Calculator</a>
        <a href="/calculators/debt-payoff"><i class="fas fa-credit-card mr-2"></i>Debt Payoff Calculator</a>
        <a href="/tools/budget-tracker"><i class="fas fa-chart-pie mr-2"></i>Budget Tracker</a>
        <a href="/tools/expense-manager"><i class="fas fa-shopping-cart mr-2"></i>Expense Manager</a>
        <a href="/tools/emergency-fund"><i class="fas fa-shield-alt mr-2"></i>Emergency Fund Calculator</a>
        <a href="/tools/goals-planner"><i class="fas fa-target mr-2"></i>Goals Planner</a>
        <a href="/blog"><i class="fas fa-blog mr-2"></i>Blog</a>
        <a href="/contact"><i class="fas fa-envelope mr-2"></i>Contact</a>
    </div>

    <!-- Main Content Container -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <div class="hero-gradient rounded-2xl p-8 mb-8 text-white">
            <div class="text-center">
                <h1 class="brand-font text-4xl md:text-5xl font-bold mb-4">Budget Tracker</h1>
                <p class="text-xl text-gray-200 max-w-3xl mx-auto">
                    Manage your income and expenses efficiently. Set budget categories, track spending, and gain insights into your financial habits.
                </p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="mwg-container">
            <!-- Income Setup Section -->
            <div class="mwg-card">
                <h2><i class="fas fa-coins mr-2"></i>Income Setup</h2>
                
                <h3 class="mt-4 mb-4"><i class="fas fa-plus mr-2"></i>Add Income Sources</h3>
                <div class="category-selector">
                    <select id="incomeTypeSelect" class="mwg-select" style="width: 200px; display: inline-block; margin-right: 1rem;">
                        <option value="">Select Income Type</option>
                    </select>
                    <input type="number" id="incomeAmount" class="mwg-input" placeholder="Amount (₹)" style="width: 150px; display: inline-block; margin-right: 1rem;">
                    <button onclick="addIncomeSource()" class="mwg-btn">
                        <i class="fas fa-plus"></i> Add
                    </button>
                </div>

                <h3 class="mt-6 mb-4"><i class="fas fa-list mr-2"></i>Income Sources</h3>
                <div class="income-categories" id="incomeList">
                    <!-- Income sources will be populated here -->
                </div>
                
                <div class="results-grid mt-4">
                    <div class="result-card">
                        <div class="label">Total Monthly Income</div>
                        <div class="value" id="totalIncome">₹0</div>
                    </div>
                </div>
            </div>

            <!-- Budget Categories Section -->
            <div class="mwg-card">
                <h2><i class="fas fa-cog mr-2"></i>Budget Categories</h2>
                
                <div class="category-selector">
                    <select id="categoryTypeSelect" class="mwg-select" style="width: 200px; display: inline-block; margin-right: 1rem;">
                        <option value="">Select Category</option>
                    </select>
                    <input type="number" id="categoryBudget" class="mwg-input" placeholder="Budget Amount (₹)" style="width: 150px; display: inline-block; margin-right: 1rem;">
                    <button onclick="addBudgetCategory()" class="mwg-btn">
                        <i class="fas fa-plus"></i> Add Category
                    </button>
                </div>

                <h3 class="mt-6 mb-4"><i class="fas fa-list mr-2"></i>Budget Categories</h3>
                <div id="categoryList">
                    <!-- Categories will be populated here -->
                </div>
            </div>

            <!-- Quick Add Expense -->
            <div class="mwg-card">
                <h2><i class="fas fa-plus-circle mr-2"></i>Add Expense</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="input-group">
                        <label for="expenseAmount">Amount (₹)</label>
                        <input type="number" id="expenseAmount" class="mwg-input" placeholder="Enter amount">
                    </div>
                    <div class="input-group">
                        <label for="expenseCategory">Category</label>
                        <select id="expenseCategory" class="mwg-select">
                            <option value="">Select category</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="expenseDescription">Description</label>
                        <input type="text" id="expenseDescription" class="mwg-input" placeholder="Expense description">
                    </div>
                    <div class="input-group">
                        <label for="expenseDate">Date</label>
                        <input type="date" id="expenseDate" class="mwg-input">
                    </div>
                </div>
                <button onclick="addExpense()" class="mwg-btn accent">
                    <i class="fas fa-save"></i> Add Expense
                </button>
            </div>

            <!-- Budget Overview -->
            <div class="mwg-card">
                <h2><i class="fas fa-chart-pie mr-2"></i>Budget Overview</h2>
                <div class="results-grid">
                    <div class="result-card">
                        <div class="label">Total Budget</div>
                        <div class="value" id="totalBudget">₹0</div>
                    </div>
                    <div class="result-card">
                        <div class="label">Total Spent</div>
                        <div class="value" id="totalSpent">₹0</div>
                    </div>
                    <div class="result-card">
                        <div class="label">Remaining</div>
                        <div class="value" id="totalRemaining">₹0</div>
                    </div>
                    <div class="result-card">
                        <div class="label">Budget Utilized</div>
                        <div class="value" id="budgetUtilization">0%</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="budgetChart"></canvas>
                </div>
            </div>

            <!-- Category Breakdown with Bar Chart -->
            <div class="mwg-card">
                <h2><i class="fas fa-chart-bar mr-2"></i>Category Breakdown</h2>
                <div class="chart-container">
                    <canvas id="categoryBarChart"></canvas>
                </div>
            </div>

            <!-- Income vs Expenses Chart -->
            <div class="mwg-card">
                <h2><i class="fas fa-balance-scale mr-2"></i>Income vs Expenses</h2>
                <div class="chart-container">
                    <canvas id="incomeExpenseChart"></canvas>
                </div>
            </div>

            <!-- Expense History -->
            <div class="mwg-card">
                <h2><i class="fas fa-history mr-2"></i>Recent Expenses</h2>
                <div class="overflow-x-auto">
                    <table class="mwg-table" id="expenseTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Category</th>
                                <th>Description</th>
                                <th class="text-right">Amount (₹)</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody id="expenseTableBody">
                            <!-- Expenses will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Actions -->
            <div class="actions-row">
                <button onclick="exportCSV()" class="mwg-btn">
                    <i class="fas fa-file-csv"></i> Export CSV
                </button>
                <button onclick="resetData()" class="mwg-btn outline">
                    <i class="fas fa-refresh"></i> Reset All Data
                </button>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-grid">
                <div class="footer-section">
                    <div class="flex items-center space-x-3 mb-4">
                        <img src="https://page.gensparksite.com/v1/base64_upload/415cfa8f4313163509e7eeacb4384ed8" alt="MoneyWiseGuide Logo" class="h-8 w-8">
                        <div class="brand-font text-xl font-bold text-white">MoneyWiseGuide</div>
                    </div>
                    <p class="text-gray-300 mb-4">Your trusted companion for financial planning and wealth management. Make informed decisions with our comprehensive suite of calculators and tools.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Calculators</h3>
                    <a href="/calculators/sip">SIP Calculator</a>
                    <a href="/calculators/lumpsum">Lumpsum Calculator</a>
                    <a href="/calculators/fixed-deposit">Fixed Deposit Calculator</a>
                    <a href="/calculators/recurring-deposit">Recurring Deposit Calculator</a>
                    <a href="/calculators/mortgage">Mortgage Calculator</a>
                </div>
                
                <div class="footer-section">
                    <h3>Tools</h3>
                    <a href="/tools/budget-tracker">Budget Tracker</a>
                    <a href="/tools/expense-manager">Expense Manager</a>
                    <a href="/tools/emergency-fund">Emergency Fund Calculator</a>
                    <a href="/tools/retirement-planner">Retirement Planner</a>
                    <a href="/tools/goals-planner">Goals Planner</a>
                </div>
                
                <div class="footer-section">
                    <h3>Resources</h3>
                    <a href="/blog">Blog & Articles</a>
                    <a href="/guides">Financial Guides</a>
                    <a href="/contact">Contact Us</a>
                    <a href="/about">About MoneyWiseGuide</a>
                    <a href="/privacy">Privacy Policy</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 MoneyWiseGuide. All rights reserved. | Making financial planning accessible to everyone.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            mobileNav.classList.toggle('open');
        }

        // Income categories based on research
        const incomeTypes = [
            { id: 'salary', label: 'Salary/Wages', icon: '💼', color: '#0B1F3B' },
            { id: 'business', label: 'Business Income', icon: '🏢', color: '#FF7A21' },
            { id: 'freelance', label: 'Freelance/Consulting', icon: '💻', color: '#10B981' },
            { id: 'rental', label: 'Rental Income', icon: '🏠', color: '#F59E0B' },
            { id: 'dividends', label: 'Dividends', icon: '📈', color: '#8B5CF6' },
            { id: 'interest', label: 'Interest Income', icon: '🏦', color: '#06B6D4' },
            { id: 'capital_gains', label: 'Capital Gains', icon: '💎', color: '#EF4444' },
            { id: 'pension', label: 'Pension/Retirement', icon: '👴', color: '#84CC16' },
            { id: 'social_security', label: 'Social Security/PF', icon: '🛡️', color: '#EC4899' },
            { id: 'alimony', label: 'Alimony/Support', icon: '👨‍👩‍👧‍👦', color: '#F97316' },
            { id: 'royalties', label: 'Royalties', icon: '🎵', color: '#14B8A6' },
            { id: 'commission', label: 'Commission', icon: '🤝', color: '#A855F7' },
            { id: 'bonus', label: 'Bonus/Incentives', icon: '🎁', color: '#059669' },
            { id: 'other', label: 'Other Income', icon: '💰', color: '#6B7280' }
        ];

        // Expense categories from Emergency Fund Calculator
        const expenseCategories = [
            { id: 'housing', label: 'Housing', icon: '🏠', color: '#0B1F3B', help: 'Rent/EMI, property tax, maintenance' },
            { id: 'utilities', label: 'Utilities', icon: '💡', color: '#FF7A21', help: 'Electricity, water, gas, internet' },
            { id: 'food', label: 'Food & Groceries', icon: '🍽️', color: '#10B981', help: 'Essential groceries and basic meals' },
            { id: 'transport', label: 'Transportation', icon: '🚗', color: '#3B82F6', help: 'Fuel, public transport, vehicle maintenance' },
            { id: 'insurance', label: 'Insurance', icon: '🛡️', color: '#8B5CF6', help: 'Health, life, vehicle insurance premiums' },
            { id: 'debt', label: 'Debt Payments', icon: '💳', color: '#EF4444', help: 'Minimum payments on loans and credit cards' },
            { id: 'healthcare', label: 'Healthcare', icon: '🏥', color: '#F59E0B', help: 'Essential medical expenses and medicines' },
            { id: 'childcare', label: 'Childcare/Education', icon: '👶', color: '#EC4899', help: 'School fees, daycare, essential supplies' },
            { id: 'entertainment', label: 'Entertainment', icon: '🎬', color: '#06B6D4', help: 'Movies, dining out, recreation' },
            { id: 'shopping', label: 'Shopping', icon: '🛍️', color: '#84CC16', help: 'Clothing, personal items, non-essentials' },
            { id: 'savings', label: 'Savings & Investments', icon: '💰', color: '#14B8A6', help: 'Emergency fund, investments, retirement' },
            { id: 'personal', label: 'Personal Care', icon: '💆', color: '#F97316', help: 'Salon, spa, personal grooming' },
            { id: 'travel', label: 'Travel', icon: '✈️', color: '#A855F7', help: 'Vacation, business travel, transportation' },
            { id: 'miscellaneous', label: 'Miscellaneous', icon: '📦', color: '#6B7280', help: 'Other expenses not categorized' }
        ];

        // Global data
        let budgetData = {
            income: {},
            categories: {},
            expenses: []
        };

        // Initialize charts
        let budgetChart = null;
        let categoryBarChart = null;
        let incomeExpenseChart = null;

        // Currency formatter
        const formatCurrency = (amount) => {
            return new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                minimumFractionDigits: 0
            }).format(amount);
        };

        // Sanitize text to remove stray characters
        const sanitize = (str) => {
            if (str === undefined || str === null) return '';
            return String(str).replace(/\u00B9/g, '');
        };

        // Initialize dropdowns
        function initializeDropdowns() {
            // Income types dropdown
            const incomeSelect = document.getElementById('incomeTypeSelect');
            incomeTypes.forEach(type => {
                const option = document.createElement('option');
                option.value = type.id;
                option.textContent = `${type.icon} ${type.label}`;
                incomeSelect.appendChild(option);
            });

            // Expense categories dropdown
            const categorySelect = document.getElementById('categoryTypeSelect');
            expenseCategories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = `${category.icon} ${category.label}`;
                categorySelect.appendChild(option);
            });
        }

        // Add income source
        function addIncomeSource() {
            const typeId = document.getElementById('incomeTypeSelect').value;
            const amount = parseFloat(document.getElementById('incomeAmount').value);

            if (!typeId || !amount) {
                alert('Please select income type and enter amount');
                return;
            }

            const incomeType = incomeTypes.find(t => t.id === typeId);
            if (!incomeType) return;

            budgetData.income[typeId] = amount;
            
            // Clear inputs
            document.getElementById('incomeTypeSelect').value = '';
            document.getElementById('incomeAmount').value = '';

            saveData();
            updateUI();
        }

        // Add budget category
        function addBudgetCategory() {
            const categoryId = document.getElementById('categoryTypeSelect').value;
            const budget = parseFloat(document.getElementById('categoryBudget').value);

            if (!categoryId || !budget) {
                alert('Please select category and enter budget amount');
                return;
            }

            const category = expenseCategories.find(c => c.id === categoryId);
            if (!category) return;

            budgetData.categories[categoryId] = budget;
            
            // Clear inputs
            document.getElementById('categoryTypeSelect').value = '';
            document.getElementById('categoryBudget').value = '';

            saveData();
            updateUI();
        }

        // Load data from localStorage
        function loadData() {
            const saved = localStorage.getItem('budgetTrackerDataEnhanced');
            if (saved) {
                budgetData = JSON.parse(saved);
            }
            
            // Set today's date as default
            document.getElementById('expenseDate').valueAsDate = new Date();
            
            updateUI();
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('budgetTrackerDataEnhanced', JSON.stringify(budgetData));
        }

        // Add expense
        function addExpense() {
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const categoryId = document.getElementById('expenseCategory').value;
            const description = document.getElementById('expenseDescription').value;
            const date = document.getElementById('expenseDate').value;

            if (!amount || !categoryId || !description || !date) {
                alert('Please fill all fields');
                return;
            }

            const expense = {
                id: Date.now(),
                amount,
                categoryId,
                description: sanitize(description),
                date
            };

            budgetData.expenses.push(expense);
            
            // Clear form
            document.getElementById('expenseAmount').value = '';
            document.getElementById('expenseDescription').value = '';
            
            saveData();
            updateUI();
        }

        // Delete expense
        function deleteExpense(id) {
            if (confirm('Are you sure you want to delete this expense?')) {
                budgetData.expenses = budgetData.expenses.filter(exp => exp.id !== id);
                saveData();
                updateUI();
            }
        }

        // Delete income source
        function deleteIncomeSource(typeId) {
            if (confirm('Are you sure you want to delete this income source?')) {
                delete budgetData.income[typeId];
                saveData();
                updateUI();
            }
        }

        // Delete budget category
        function deleteBudgetCategory(categoryId) {
            if (confirm('Are you sure you want to delete this budget category?')) {
                delete budgetData.categories[categoryId];
                // Remove expenses in this category
                budgetData.expenses = budgetData.expenses.filter(exp => exp.categoryId !== categoryId);
                saveData();
                updateUI();
            }
        }

        // Update UI
        function updateUI() {
            updateIncomeList();
            updateCategoryList();
            updateExpenseCategoryDropdown();
            updateOverview();
            updateExpenseTable();
            updateCharts();
        }

        // Update income list
        function updateIncomeList() {
            const incomeList = document.getElementById('incomeList');
            incomeList.innerHTML = '';

            let totalIncome = 0;

            Object.entries(budgetData.income).forEach(([typeId, amount]) => {
                const incomeType = incomeTypes.find(t => t.id === typeId);
                if (!incomeType) return;

                totalIncome += amount;

                const div = document.createElement('div');
                div.className = 'category-input';
                div.innerHTML = `
                    <div class="category-icon" style="background-color: ${incomeType.color}">
                        ${incomeType.icon}
                    </div>
                    <div class="category-details">
                        <div class="category-label">${incomeType.label}</div>
                        <div style="font-size: 1.2rem; font-weight: 600; color: var(--mwg-color-brand);">${formatCurrency(amount)}</div>
                    </div>
                    <button onclick="deleteIncomeSource('${typeId}')" class="mwg-btn" style="background: #EF4444; padding: 0.5rem;">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                incomeList.appendChild(div);
            });

            document.getElementById('totalIncome').textContent = formatCurrency(totalIncome);
        }

        // Update category list
        function updateCategoryList() {
            const categoryList = document.getElementById('categoryList');
            categoryList.innerHTML = '';

            Object.entries(budgetData.categories).forEach(([categoryId, budget]) => {
                const category = expenseCategories.find(c => c.id === categoryId);
                if (!category) return;

                const div = document.createElement('div');
                div.className = 'category-input';
                div.innerHTML = `
                    <div class="category-icon" style="background-color: ${category.color}">
                        ${category.icon}
                    </div>
                    <div class="category-details">
                        <div class="category-label">${category.label}</div>
                        <div style="font-size: 1.1rem; font-weight: 600; color: var(--mwg-color-brand);">${formatCurrency(budget)}</div>
                        <div class="help-text">${category.help}</div>
                    </div>
                    <button onclick="deleteBudgetCategory('${categoryId}')" class="mwg-btn" style="background: #EF4444; padding: 0.5rem;">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                categoryList.appendChild(div);
            });
        }

        // Update expense category dropdown
        function updateExpenseCategoryDropdown() {
            const select = document.getElementById('expenseCategory');
            select.innerHTML = '<option value="">Select category</option>';
            
            Object.keys(budgetData.categories).forEach(categoryId => {
                const category = expenseCategories.find(c => c.id === categoryId);
                if (category) {
                    const option = document.createElement('option');
                    option.value = categoryId;
                    option.textContent = `${category.icon} ${category.label}`;
                    select.appendChild(option);
                }
            });
        }

        // Calculate totals
        function calculateTotals() {
            const totalIncome = Object.values(budgetData.income).reduce((sum, amount) => sum + amount, 0);
            const totalBudget = Object.values(budgetData.categories).reduce((sum, budget) => sum + budget, 0);
            const totalSpent = budgetData.expenses.reduce((sum, exp) => sum + exp.amount, 0);
            const totalRemaining = totalBudget - totalSpent;
            const budgetUtilization = totalBudget > 0 ? (totalSpent / totalBudget * 100) : 0;

            return { totalIncome, totalBudget, totalSpent, totalRemaining, budgetUtilization };
        }

        // Update overview
        function updateOverview() {
            const { totalBudget, totalSpent, totalRemaining, budgetUtilization } = calculateTotals();

            document.getElementById('totalBudget').textContent = formatCurrency(totalBudget);
            document.getElementById('totalSpent').textContent = formatCurrency(totalSpent);
            document.getElementById('totalRemaining').textContent = formatCurrency(totalRemaining);
            document.getElementById('budgetUtilization').textContent = budgetUtilization.toFixed(1) + '%';
        }

        // Update expense table
        function updateExpenseTable() {
            const tbody = document.getElementById('expenseTableBody');
            tbody.innerHTML = '';

            if (budgetData.expenses.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" class="text-center py-8 text-gray-500">No expenses added yet</td></tr>';
                return;
            }

            // Sort expenses by date (newest first)
            const sortedExpenses = [...budgetData.expenses].sort((a, b) => new Date(b.date) - new Date(a.date));

            sortedExpenses.forEach(expense => {
                const category = expenseCategories.find(c => c.id === expense.categoryId);
                const categoryName = category ? category.label : 'Unknown';

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${new Date(expense.date).toLocaleDateString('en-IN')}</td>
                    <td>${categoryName}</td>
                    <td>${sanitize(expense.description)}</td>
                    <td class="text-right">${formatCurrency(expense.amount)}</td>
                    <td class="text-center">
                        <button onclick="deleteExpense(${expense.id})" class="mwg-btn" style="background: #EF4444; padding: 0.5rem;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Update charts
        function updateCharts() {
            updateBudgetChart();
            updateCategoryBarChart();
            updateIncomeExpenseChart();
        }

        // Update budget overview chart
        function updateBudgetChart() {
            const ctx = document.getElementById('budgetChart').getContext('2d');
            const { totalBudget, totalSpent, totalRemaining } = calculateTotals();

            if (budgetChart) {
                budgetChart.destroy();
            }

            budgetChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Spent', 'Remaining'],
                    datasets: [{
                        data: [totalSpent, Math.max(0, totalRemaining)],
                        backgroundColor: ['#FF7A21', '#10B981'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    family: 'Inter',
                                    size: 12
                                },
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        }

        // Update category bar chart
        function updateCategoryBarChart() {
            const ctx = document.getElementById('categoryBarChart').getContext('2d');
            
            const categoryData = Object.entries(budgetData.categories).map(([categoryId, budget]) => {
                const category = expenseCategories.find(c => c.id === categoryId);
                const spent = budgetData.expenses
                    .filter(exp => exp.categoryId === categoryId)
                    .reduce((sum, exp) => sum + exp.amount, 0);
                
                return {
                    category: category ? category.label : 'Unknown',
                    budget,
                    spent,
                    color: category ? category.color : '#6B7280'
                };
            });

            if (categoryBarChart) {
                categoryBarChart.destroy();
            }

            if (categoryData.length === 0) {
                return;
            }

            categoryBarChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: categoryData.map(item => item.category),
                    datasets: [
                        {
                            label: 'Budget',
                            data: categoryData.map(item => item.budget),
                            backgroundColor: '#0B1F3B',
                            borderRadius: 4
                        },
                        {
                            label: 'Spent',
                            data: categoryData.map(item => item.spent),
                            backgroundColor: '#FF7A21',
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    family: 'Inter',
                                    size: 12
                                },
                                usePointStyle: true
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update income vs expense chart
        function updateIncomeExpenseChart() {
            const ctx = document.getElementById('incomeExpenseChart').getContext('2d');
            const { totalIncome, totalSpent } = calculateTotals();

            if (incomeExpenseChart) {
                incomeExpenseChart.destroy();
            }

            incomeExpenseChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Monthly Comparison'],
                    datasets: [
                        {
                            label: 'Total Income',
                            data: [totalIncome],
                            backgroundColor: '#10B981',
                            borderRadius: 8
                        },
                        {
                            label: 'Total Expenses',
                            data: [totalSpent],
                            backgroundColor: '#FF7A21',
                            borderRadius: 8
                        },
                        {
                            label: 'Net Savings',
                            data: [totalIncome - totalSpent],
                            backgroundColor: totalIncome - totalSpent >= 0 ? '#0B1F3B' : '#EF4444',
                            borderRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    family: 'Inter',
                                    size: 12
                                },
                                usePointStyle: true
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });
        }



        // Export CSV
        function exportCSV() {
            const timestamp = new Date().toISOString();
            
            let csv = 'Site,MoneyWiseGuide\n';
            csv += 'Report,Budget Tracker Enhanced\n';
            csv += `GeneratedAt,${timestamp}\n`;
            csv += '\n';
            
            // Income sources
            csv += 'Income Sources\n';
            csv += 'Source,Amount\n';
            Object.entries(budgetData.income).forEach(([typeId, amount]) => {
                const incomeType = incomeTypes.find(t => t.id === typeId);
                csv += `"${incomeType ? incomeType.label : 'Unknown'}",${amount}\n`;
            });
            
            csv += '\n';
            
            // Category breakdown
            csv += 'Category Breakdown\n';
            csv += 'Category,Budget,Spent,Remaining,Utilization\n';
            Object.entries(budgetData.categories).forEach(([categoryId, budget]) => {
                const category = expenseCategories.find(c => c.id === categoryId);
                const spent = budgetData.expenses
                    .filter(exp => exp.categoryId === categoryId)
                    .reduce((sum, exp) => sum + exp.amount, 0);
                const remaining = budget - spent;
                const percentage = budget > 0 ? (spent / budget * 100).toFixed(1) : '0.0';
                
                csv += `"${category ? category.label : 'Unknown'}",${budget},${spent},${remaining},${percentage}\n`;
            });
            
            csv += '\n';
            csv += 'Expenses\n';
            csv += 'Date,Category,Description,Amount\n';
            
            // Expenses
            budgetData.expenses
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .forEach(exp => {
                    const category = expenseCategories.find(c => c.id === exp.categoryId);
                    csv += `${exp.date},"${category ? category.label : 'Unknown'}","${sanitize(exp.description)}",${exp.amount}\n`;
                });

            // Download
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `Budget_Tracker_Enhanced_${timestamp.slice(0, 10)}.csv`;
            link.click();
        }

        // Reset all data
        function resetData() {
            if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                budgetData = {
                    income: {},
                    categories: {},
                    expenses: []
                };
                saveData();
                updateUI();
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Set Chart.js defaults
            Chart.defaults.font.family = 'Inter, system-ui, sans-serif';
            Chart.defaults.plugins.legend.labels.boxWidth = 12;
            Chart.defaults.plugins.legend.labels.usePointStyle = true;
            
            initializeDropdowns();
            loadData();
        });
    </script>
</body>
</html>